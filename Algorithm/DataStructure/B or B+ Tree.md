# B 树

​	在计算机科学中，B树（英语：B-tree）是一种自平衡的树，能够保持数据有序。这种数据结构能够让查找数据、顺序访问、插入数据及删除的动作，都在对数时间内完成。B树，概括来说是一个一般化的二叉查找树（binary search tree）一个节点可以拥有2个以上的子节点。与自平衡二叉查找树不同，B树适用于读写相对大的数据块的存储系统，例如磁盘。B树减少定位记录时所经历的中间过程，从而加快存取速度。B树这种数据结构可以用来描述外部存储。这种数据结构常被应用在数据库和文件系统的实现上。

​	数据库很多是采用B-/+树作为索引，例如Mysql的InnoDB引擎使用的B+树、MongoDB默认采用B树作为索引。

## B 树的定义

**一个 \*m\* 阶的B树是一个有以下属性的树：**

1. 每一个节点最多有 *m* 个子节点
2. 每一个非叶子节点（除根节点）最少有 ⌈*m*/2⌉ 个子节点
3. 如果根节点不是叶子节点，那么它至少有两个子节点
4. 有 *k* 个子节点的非叶子节点拥有 *k* − 1 个键
5. 所有的叶子节点都在同一层

**B树的高度**

B 树的高度不包括最后的不带任何信息的叶结点所在的那一层。





## 查找

​	在B树上查找于二叉排序树很相似，只是每个结点都是多个关键字的有序表，在每个结点上所做的不是两路分支决定，而是根据该节点的子树所做的多路分支决定。

B树的查找包含两个基本操作：

1. 在B树中找结点
2. 在结点内找关键字

​	由于B树常存储在磁盘上，因此前一个查找操作是在磁盘上进行的，而后一个查找操作是在内存中继续的。即在找到目标结点后，先将结点信息读入内存，然后在结点内采用顺序查找法，或折半查找法。

​	在B树上查找到某个结点后，先在有序表中进行查找，若找到则查找成功，否则按照对应的指针信息到所指的子树中去查找。查找到叶结点（对应指针为空指针）时，则说明树中没有对应的关键字，查找失败。



# B+ 树



一棵m阶的B+树需满足下列条件：

1. 每个分支结点最多有m棵子树
2. 非叶根节点至少有两棵子树，其他每个分支结点至少有【m/2】棵子树

​       结点的子树个数于关键字个数相等

1. 所有叶结点包含全部关键字及其相应记录的指针，叶结点中将关键字按大小顺序排列，并且相邻叶结点按大小顺序相互链接起来。
2. 所有分支结点（可视为索引的索引）中仅包含他的各个子节点（即下一级的索引块）中关键字的最大值及指向其子节点的指针。









# Distinctions

- 在B+树中，具有n个关键字的结点只含有n棵子树，即每个关键字对应一棵子树；而在B树中，具有n个关键字的结点含有n+1棵子树。
- 在B+树中，每个结点（非根内部结点）的关键字个数n的范围是【m/2】<=n<=m（根节点：1<=n<=m）； 在B树中，每个结点（非根叶结点）的关键字个数n的范围是【m/2】-1<=n<=m-1（根节点：1<=n<=m-1）。
- 在B+树中，叶结点包含信息，所有非叶结点仅起索引作用，非叶节点中的每个索引项只含有对应子树的最大关键字和指向该子树的指针，不含有该关键字对应记录的存储地址。
- 在B+树中，叶结点包含了全部关键字，即在非叶结点中出现的关键字也会出现在叶结点中；而在B树中，叶结点包含的关键字和其他结点包含的关键字是不重复的。





